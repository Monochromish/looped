<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <!-- Bootstrap core CSS -->
    <link href="../libs/css/bootstrap.min.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <link rel="stylesheet" href="../libs/css/bootstrap-light.min.css" />
    <link rel="stylesheet" href="../libs/css/bootstrap-prefers-dark.min.css" />

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }
        
        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>
    <title>Login</title>

    <!-- Magic Social Embeds -->
    <meta property="og:title" content="Looped">
    <meta name="description" content="An alternative School Loop interface">
    <meta property="og:locale" content="en_US">
    <meta property="og:description" content="An alternative School Loop interface">
    <link rel="canonical" href="https://looped.pages.dev/">
    <meta property="og:url" content="https://looped.pages.dev/">
    <meta property="og:site_name" content="Looped">
    <meta name="twitter:card" content="summary">
    <meta property="twitter:title" content="Looped">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <script type="application/ld+json">
        {
            "description": "An alternative School Loop interface",
            "url": "https://looped.pages.dev/",
            "@type": "WebSite",
            "headline": "Looped",
            "name": "Looped",
            "@context": "https://schema.org"
        }
    </script>


    <!-- Cloudflare Web Analytics -->
    <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "1a946f8d2d5942a886f6f33a86f1f006"}'></script>
    <!-- End Cloudflare Web Analytics -->

    <!-- Custom styles for this template -->

    <link href="signin.css" rel="stylesheet">

    <!-- PWA Manifest -->
    <link rel="manifest" href="../manifest.json">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NDECW1B0XP"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'G-NDECW1B0XP');
    </script>

</head>

<body class="text-center">

    <main class="form-signin">
        <form id="login" name="loginForm" class="needs-validation" accept-charset=utf-8>
            <img class="mb-4" src="./logo.png" alt="HMBHS School Loop" width="100" height="57">
            <h1 class="h3 mb-3 fw-normal">Please sign in</h1>

            <div class="form-floating">
                <input type="username" class="form-control" id="floatingUsername" placeholder="jnazar" name="user">
                <label for="floatingInput">Username</label>
                <div class="valid-feedback">
                    Looks good!
                </div>
                <div class="invalid-feedback">
                    Please enter a username
                </div>
            </div>
            <div class="form-floating">
                <input type="password" class="form-control" id="floatingPassword" placeholder="Password" name="pass">
                <label for="floatingPassword">Password</label>
                <div class="valid-feedback">
                    Looks good!
                </div>
                <div class="invalid-feedback">
                    Please enter a password
                </div>
            </div>


            <div id="loginAlert"></div>
            <button class="w-100 btn btn-lg btn-primary" type="submit" id="signin-button">Sign in</button>
            <p class="mt-5 mb-3 text-muted">2021</p>
        </form>

    </main>
    <div id="error">
        <div class="modal" id="roleError" aria-hidden="false">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Error</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>This site <b>only</b> allows users with a <code> student </code> role at this time <br><br>Your role of <code id="badRole"></code> is not supported</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="wrongRoleButton">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="toast-container">
        <div class="toast position-absoulute bottom-0 end-0 text-white bg-primary border-0 position-absolute" role="alert" aria-live="assertive" aria-atomic="true" id='loggedOutToast'>
            <div class="d-flex">
                <div class="toast-body">
                    You have been logged out.
                </div>
            </div>
        </div>

        <div class="toast position-absoulute bottom-0 end-0 text-white bg-warning border-0 position-absolute" data-bs-autohise="false" role="alert" aria-live="assertive" aria-atomic="true" id='crosWarning'>
            <div class="d-flex">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16">
  <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/>
  <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/>
</svg>
                <div class="toast-body">
                    ChromeOS support is not great, things might break
                </div>
            </div>
        </div>
    </div>

    <footer class="position-absolute bottom-0 start-50 translate-middle-x">
        <small id="runas"></small>
    </footer>
    <script src="../libs/js/js.cookie.min.js"></script>
    <script src="../libs/js/bootstrap.bundle.min.js"></script>
    <script src="../libs/js/jquery-3.6.0.min.js "></script>
    <script src="../libs/js/platform-detect.js "></script>
    <script src="../dashboard/pwaCheck.js"></script>
    <script src="login.js "></script>
    <!-- Cloudflare Web Analytics -->
    <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "1a946f8d2d5942a886f6f33a86f1f006"}'></script>
    <!-- End Cloudflare Web Analytics -->
    <script>
        if (Cookies.get('slUser')) {
            console.info('School Loop User Cookie Found! Sending to Dashboard')
            setTimeout(() => {
                login()
            }, 150)
        }
    </script>

</body>




</html>